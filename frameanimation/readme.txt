【はじめにお読みください】

このプラグインは、ティラノスクリプトのキャラクター差分パーツ機能で目パチ・口パクを行うためのものです。
このテキストが入っているフォルダ（frameanimation）ごとティラノスクリプトの「data/others/plugin」フォルダに入れてください。
その後、first.ksに以下のとおり記述してください。

==========================
記述例：
--------------------------
[plugin name="frameanimation" blank_image="data/image/blank.png"]
==========================
上記のマクロを記述した時点から、後述するマクロを使用できるようになります。
また、指定できる引数は以下のとおりです。

==========================
frameanimation：指定可能引数
--------------------------
blank_image  ：透明なpng画像（サイズはなんでもOK）のパスを「data」フォルダから記述
※指定しない場合、init.ksの7行目は絶対に変更しないでください。動かなくなります。
==========================



【アニメーション用画像ファイルの作り方】
アニメーションしないパーツについては、通常の差分パーツと同じように作成してください。
アニメーションするパーツは、まず通常の差分パーツと同じように作成し、左から1コマ目、2コマ目、3コマ目…となるようにアニメーションするコマの数だけ画像を連結してください。


【アニメーション定義の注意】
このマクロでは、CSSアニメーションを使用して画像のアニメーションを行っています。
そのため、「常に同じ」タイミングでアニメーションが実行されます。
目パチを行うキャラクターが同じ画面に同時に複数配置される場合、キャラクター全員に同じタイミングのアニメーションを設定すると、目パチのタイミングが同じになり違和感が生じます。
よって、目パチのアニメーション定義はキャラクターごとに別のものを使用することをおすすめします。


【マクロ一覧】
==========================
[blink_animation]：アニメーションを定義
アニメーションの動きを定義し、アニメーションさせるキャラクターと紐付けます。
※このタグは、キャラクターの登場（[chara_show]タグ）より「前」に記述してください。
--------------------------
属性：
name(必須) ：アニメーションさせるキャラクターの名前（[chara_new]タグで指定した名前）を指定します。
part(必須) ：アニメーションさせるパーツ（[chara_layer]タグで指定したパーツ名）を指定します。
w(必須)    ：画像の1コマあたりの横幅を数値で指定します。（例：全体が300pxで3コマ分の画像なら、100を指定）
s　　      ：アニメーションの秒数を数値で指定します。単位は秒です。(初期値：4)
anime(必須)：アニメーションの定義を配列で指定します。下記の例を参考に指定してください。
例：
※配列を定義するときは[iscript][endscript]で囲む
※[進行度, 何コマ目]の順で指定します。進行度は0～100%の間を指定、コマ数は表示させたいコマの順番を指定します。
※例の場合だと、0%（一番最初）に1コマ目を表示、その後20%まで進んだら2コマ目を表示…というようになっています。
[iscript]
tf.test = [
    ["0%", 1],
    ["20%", 2],
    ["25%", 1],
    ["40%", 1],
    ["60%", 1],
    ["80%", 2],
    ["85%", 1],
    ["90%", 2],
    ["95%", 1],
    ["100%", 1]
]
[endscript]
[blink_animation anime="&tf.test" w="480" chara="namae" part="eye" s="6.5"]

==========================

==========================
[blink_start]：アニメーション開始
アニメーションを開始します
※このタグは、キャラクターの登場（[chara_show]タグ）より「後」に記述してください。
--------------------------
属性：
name(必須)：キャラクターの名前を指定します。
part(必須)：パーツ名を指定します。

例：
[blink_start name="namae" part="eye"]
==========================

==========================
[blink_end]：アニメーション終了
アニメーションを終了します。
--------------------------
属性：
name(必須)：キャラクターの名前を指定します。
part(必須)：パーツ名を指定します。

例：
[blink_end name="namae" part="eye"]
==========================


【使いかたのヒント】
実際に目パチON/OFFするときは、差分パーツの変更と組み合わせたマクロを作成すると良いでしょう。

例：
[macro name="eye_blink"]
[chara_part name="%name" eye="%id"]
[blink_start name="%name" part="eye"]
[endmacro]
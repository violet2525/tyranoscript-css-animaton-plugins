【はじめにお読みください】
このプラグインは、ティラノスクリプトのキャラクター差分パーツ機能で目パチ・口パク等アニメーションを行うものです。
ティラノスクリプトv471fにて動作確認しています。


【使い方】
「frameanimation」フォルダごとティラノスクリプトの「data/others/plugin」フォルダに入れてください。
その後、first.ksに以下のとおり記述してください。

==========================
記述例：
--------------------------
[plugin name="frameanimation" blank_image="data/image/blank.png"]
==========================
上記のマクロを記述した時点から、後述するマクロを使用できるようになります。
また、指定できる引数は以下のとおりです。

==========================
frameanimation：指定可能引数
--------------------------
blank_image  ：透明なpng画像（サイズはなんでもOK）のパスを「data」フォルダから記述
※指定しない場合、init.ksの7行目は絶対に変更しないでください。動かなくなります。
==========================



【アニメーション用画像ファイルの作り方】
アニメーションしないパーツについては、通常の差分パーツと同じように作成してください。
アニメーションするパーツは、まず通常の差分パーツと同じように作成し、左から1コマ目、2コマ目、3コマ目…となるようにアニメーションするコマの数だけ画像を連結してください。


【アニメーション定義の注意】
このマクロでは、CSSアニメーションを使用して画像のアニメーションを行っています。
そのため、「常に同じ」タイミングでアニメーションが実行されます。
目パチを行うキャラクターが同じ画面に同時に複数配置される場合、キャラクター全員に同じタイミングのアニメーションを設定すると、目パチのタイミングが同じになり違和感が生じます。
よって、目パチのアニメーション定義はキャラクターごとに別のものを使用することをおすすめします。


【マクロ一覧】
==========================
[fa_animation]：アニメーションを定義
アニメーションの動きを定義し、アニメーションさせるキャラクターと紐付けます。
※このタグは、キャラクターの登場（[chara_show]タグ）より「前」に記述してください。
--------------------------
属性：
name(必須) ：アニメーションさせるキャラクターの名前（[chara_new]タグで指定した名前）を指定します。
part(必須) ：アニメーションさせるパーツ（[chara_layer]タグで指定したパーツ名）を指定します。
id(必須)   ：アニメーションさせるパーツのid（[chala_layer]タグで指定したパーツid）を指定します。
w(必須)    ：画像の1コマあたりの横幅を数値で指定します。（例：全体が300pxで3コマ分の画像なら、100を指定）
s　　      ：アニメーションの秒数を数値で指定します。単位は秒です。(初期値：4)
anime(必須)：アニメーションの定義を配列で指定します。下記の例を参考に指定してください。
例：
※配列を定義するときは[iscript][endscript]で囲む
※[進行度, 何コマ目]の順で指定します。進行度は0～100%の間を指定、コマ数は表示させたいコマの順番を指定します。
※例の場合だと、0%（一番最初）に1コマ目を表示、その後20%まで進んだら2コマ目を表示…というようになっています。
[iscript]
tf.test = [
    ["0%", 1],
    ["20%", 2],
    ["25%", 1],
    ["40%", 1],
    ["60%", 1],
    ["80%", 2],
    ["85%", 1],
    ["90%", 2],
    ["95%", 1],
    ["100%", 1]
]
[endscript]
[blink_animation anime="&tf.test" w="480" chara="namae" part="eye" s="6.5"]

==========================

==========================
[fa_chara_show]：キャラクター登場
アニメーションを指定したキャラクターを登場させます。
--------------------------
属性：
[chara_show]タグと同じです

例：
[fa_chara_show name="namae" layer="0" time="100"]
==========================

==========================
[fa_chara_part]：キャラクターパーツ変更
アニメーションを指定したキャラクターのパーツを変更します。
--------------------------
属性：
[chara_part]タグと同じです。

例：
[fa_chara_part name="namae" eye="blink"]
==========================


【更新履歴】
2018/12/12　表情パーツ切り替え時にちらつきが発生するバグ修正
2018/08/19　マクロ名変更、キャラ差分タグの拡張に近い形に
2018/06/29　新規公開